webpackJsonp([5],{DDrA:function(t,e){},X6d5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),r=s.n(i),o=s("ra3+"),n=s("Uoa1"),a=s("NYxO"),d=s("uaSg"),l={data:function(){return{storeId:null,deskId:null,deskName:"",perNum:null,deskList:[],showAlert:!1,alertText:null}},created:function(){if(this.storeId=parseInt(this.$route.params.store_id),this.deskId=this.$route.params.desk_id?parseInt(this.$route.params.desk_id):0,this.perNum=this.perNum?this.perNum:this.personNum,!parseInt(this.storeId))return this.showAlert=!0,this.alertText="二维码不正确哦！",!1;this.getStoreInfo({store_id:this.storeId,desk_id:this.deskId}),this.getUserInfo()},mounted:function(){},components:{headTop:o.a,alertTip:n.a},computed:Object(a.d)({isLogin:function(t){return t.isLogin},userInfo:function(t){return t.userInfo},storeInfo:function(t){return t.storeInfo},personNum:function(t){return t.personNum}}),watch:{isLogin:{handler:"autoLogin"},storeInfo:{handler:"afterStoreInfo"}},methods:r()({},Object(a.b)({setStoreDesk:"setStoreDesk",getUserInfo:"getUserInfo",getStoreInfo:"getStoreInfo"}),{afterStoreInfo:function(){this.storeInfo&&(this.deskList=this.storeInfo.desks.list,this.deskName=this.storeInfo.desks.cur.name,document.title=this.storeInfo.store_name)},autoLogin:function(){var t=navigator.userAgent.toLowerCase();return this.isWeiXin=!!/micromessenger/.test(t),!1===this.isWeiXin?(this.showAlert=!0,this.alertText="请在微信中打开！",!1):!1===this.isLogin?(window.location.href=d.d+"?store_id="+this.storeId+"&desk_id="+this.deskId,!1):void(this.deskId&&this.$router.push("/shop"))},chooseDesk:function(t,e){if(!1===this.isLogin)return this.showAlert=!0,this.alertText="请在微信中打开！",!1;if(!this.perNum)return this.showAlert=!0,this.alertText="请先输入就餐人数！",!1;var s;for(s in this.deskList)for(var i=0;i<this.deskList[s].length;i++)this.deskList[s][i].desk_id===t?this.deskList[s][i].cur="cur":this.deskList[s][i].cur="normal";this.deskId=t,this.deskName=e},doVerify:function(){return!1===this.isLogin?(this.showAlert=!0,this.alertText="请在微信中打开！",!1):this.perNum?this.deskId?(this.setStoreDesk({storeId:this.storeId,deskId:this.deskId,deskName:this.deskName,personNum:this.perNum}),void this.$router.push("/shop")):(this.showAlert=!0,this.alertText="请先选择餐台！",!1):(this.showAlert=!0,this.alertText="请先输入就餐人数！",!1)},reload:function(){window.location.reload()},closeTip:function(){this.showAlert=!1}})},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("head-top",{attrs:{"signin-up":"home","head-title":t.storeInfo.store_name}},[s("span",{staticClass:"head_logo",attrs:{slot:"logo"},on:{click:t.reload},slot:"logo"},[s("img",{attrs:{src:t.storeInfo.store_log}})])]),t._v(" "),s("section",{staticClass:"input_container person_num_container"},[s("div",{staticClass:"person_tip"},[s("span",[t._v("就餐人数：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.perNum,expression:"perNum"}],attrs:{type:"text",placeholder:"请输入就餐人数",maxlength:"1"},domProps:{value:t.perNum},on:{input:function(e){e.target.composing||(t.perNum=e.target.value)}}})])]),t._v(" "),s("nav",{staticClass:"desk_nav"},[s("div",{staticClass:"desk_tip"},[s("span",[t._v("当前餐台："+t._s(t.deskName))]),t._v(" "),s("span",[t._v("未选择餐台时，请在餐台列表中选择")])])]),t._v(" "),s("section",{staticClass:"group_desk_container"},[s("ul",{staticClass:"letter_classify"},t._l(t.deskList,function(e,i,r){return s("li",{key:r,staticClass:"letter_classify_li"},[s("h4",{staticClass:"desk_title"},[t._v(t._s(i)+"\n        ")]),t._v(" "),s("ul",{staticClass:"groupdesk_name_container desklistul clear"},t._l(e,function(e){return s("li",{key:e.desk_id,class:e.cur,on:{click:function(s){t.chooseDesk(e.desk_id,e.name)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])}))])}))]),t._v(" "),s("div",{staticClass:"verify_container",on:{click:t.doVerify}},[t._v("确定")]),t._v(" "),t.showAlert?s("alert-tip",{attrs:{showHide:t.showAlert,alertText:t.alertText},on:{closeTip:t.closeTip}}):t._e()],1)},staticRenderFns:[]};var u=s("VU/8")(l,h,!1,function(t){s("DDrA")},"data-v-1e851eb8",null);e.default=u.exports}});
//# sourceMappingURL=5.cb0ad34762d0d95e1d2f.js.map