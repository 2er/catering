webpackJsonp([2],{"4O6b":function(t,e){},AQf5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),r=s.n(a),n=s("exGp"),i=s.n(n),o=s("gRE1"),c=s.n(o),u=s("Dd8w"),l=s.n(u),_=s("NYxO"),p=s("ra3+"),d=s("Uoa1"),h=s("44dg"),f=s("i84Q"),v={data:function(){return{showLoading:!0,checkoutData:null,totalAmount:null,shopCart:null,showPayWay:!1,payWay:"online",showAlert:!1,alertText:null}},created:function(){this.INIT_BUYCART(),this.shopCart=this.cartList[this.storeId]},mounted:function(){this.initData(),!this.userInfo||this.userInfo.member_id},components:{headTop:p.a,alertTip:d.a,loading:h.a},computed:l()({},Object(_.d)(["cartList","remarkText","inputText","userInfo","storeInfo","deskId","deskName","storeId","personNum"]),{remarklist:function(){var t="";return this.remarkText&&c()(this.remarkText).forEach(function(e){t+=e[1]+"，"}),this.inputText?t+this.inputText:t.substr(0,t.lastIndexOf("，"))}}),methods:l()({},Object(_.c)(["INIT_BUYCART","SAVE_ORDER_PARAM","ORDER_SUCCESS"]),{initData:function(){var t=this;return i()(r.a.mark(function e(){var s,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=[],a=0,c()(t.shopCart).forEach(function(t){c()(t).forEach(function(t){c()(t).forEach(function(t){s.push({attrs:[],extra:{},id:t.id,name:t.name,price:t.price,quantity:t.num,sku_id:t.sku_id,specs:[t.specs],stock:t.stock}),a+=t.num*t.price})})}),t.checkoutData=s,t.totalAmount=a.toFixed(2),t.showLoading=!1;case 6:case"end":return e.stop()}},e,t)}))()},confrimOrder:function(){var t=this;return i()(r.a.mark(function e(){var s,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userInfo&&t.userInfo.member_id){e.next=6;break}return t.showAlert=!0,t.alertText="请登录",e.abrupt("return");case 6:if(t.storeId){e.next=12;break}return t.showAlert=!0,t.alertText="请选择门店",e.abrupt("return");case 12:if(t.deskId){e.next=18;break}return t.showAlert=!0,t.alertText="请选择餐台",e.abrupt("return");case 18:if(t.personNum){e.next=24;break}return t.showAlert=!0,t.alertText="请选择就餐人数",e.abrupt("return");case 24:if(t.checkoutData){e.next=28;break}return t.showAlert=!0,t.alertText="购物车为空",e.abrupt("return");case 28:return s=[],t.checkoutData.forEach(function(t){var e={};e.goods_bn=t.sku_id,e.num=t.quantity,s.push(e)}),e.next=32,Object(f.c)({store_id:t.storeId,desk_id:t.deskId,person_num:t.personNum,goods_data:s,pay_type:t.payWay,remark_text:t.remarkText,input_text:t.inputText});case 32:if("0000"!==(a=e.sent).return_code){e.next=38;break}t.ORDER_SUCCESS(a.data),t.$router.push("/confirmOrder/payment"),e.next=41;break;case 38:return t.showAlert=!0,t.alertText=a.return_msg,e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,t)}))()},showPayWayFun:function(){this.showPayWay=!this.showPayWay},choosePayWay:function(t){this.showPayWay=!this.showPayWay,this.payWay=t}}),watch:{userInfo:function(t){t&&t.user_id&&this.initAddress()}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"confirmOrderContainer"},[t.showLoading?t._e():s("section",[s("head-top",{attrs:{"head-title":"确认订单",goBack:"true","signin-up":"confirmOrder"}}),t._v(" "),s("section",{staticClass:"pay_way container_style"},[s("header",{staticClass:"header_style"},[s("span",[t._v("餐台")]),t._v(" "),s("span",[t._v(t._s(t.deskName))])]),t._v(" "),s("header",{staticClass:"header_style"},[s("span",[t._v("就餐人数")]),t._v(" "),s("span",[t._v(t._s(t.personNum))])])]),t._v(" "),s("section",{staticClass:"food_list"},[t.storeInfo?s("header",[s("img",{attrs:{src:t.storeInfo.store_log}}),t._v(" "),s("span",[t._v(t._s(t.storeInfo.store_name))])]):t._e(),t._v(" "),t.shopCart?s("ul",{staticClass:"food_list_ul"},t._l(t.checkoutData,function(e){return s("li",{key:e.sku_id,staticClass:"food_item_style"},[s("p",{staticClass:"food_name ellipsis"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"num_price"},[s("span",[t._v("x "+t._s(e.quantity))]),t._v(" "),s("span",[t._v("¥"+t._s(e.price))])])])})):t._e(),t._v(" "),s("div",{staticClass:"food_item_style total_price"},[s("p",{staticClass:"food_name ellipsis"},[t._v("订单 ¥"+t._s(t.totalAmount))]),t._v(" "),s("div",{staticClass:"num_price"},[s("span",[t._v("待支付 ¥"+t._s(t.totalAmount))])])])]),t._v(" "),s("section",{staticClass:"pay_way container_style"},[s("header",{staticClass:"header_style"},[s("span",[t._v("支付方式")]),t._v(" "),s("div",{staticClass:"more_type",on:{click:t.showPayWayFun}},[s("span",[t._v(t._s("online"===t.payWay?"在线支付":"现金支付"))]),t._v(" "),s("svg",{staticClass:"address_empty_right"},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])])]),t._v(" "),s("section",{staticClass:"pay_way container_style"},[s("router-link",{staticClass:"header_style",attrs:{to:{path:"/confirmOrder/remark"}}},[s("span",[t._v("备注")]),t._v(" "),s("div",{staticClass:"more_type"},[s("span",{staticClass:"ellipsis"},[t._v(t._s(t.remarkText||t.inputText?t.remarklist:"口味、偏好等"))]),t._v(" "),s("svg",{staticClass:"address_empty_right"},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])])],1),t._v(" "),s("section",{staticClass:"confrim_order"},[s("p",[t._v("待支付 ¥"+t._s(t.totalAmount))]),t._v(" "),s("p",{on:{click:t.confrimOrder}},[t._v("确认下单")])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.showPayWay?s("div",{staticClass:"cover",on:{click:t.showPayWayFun}}):t._e()]),t._v(" "),s("transition",{attrs:{name:"slid_up"}},[t.showPayWay?s("div",{staticClass:"choose_type_Container"},[s("header",[t._v("支付方式")]),t._v(" "),s("ul",[s("li",{class:{choose:"offline"==t.payWay}},[s("span",[t._v("现金支付")]),t._v(" "),s("svg",{staticClass:"address_empty_right",on:{click:function(e){t.choosePayWay("offline")}}},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#select"}})])]),t._v(" "),s("li",{class:{choose:"online"==t.payWay}},[s("span",[t._v("在线支付")]),t._v(" "),s("svg",{staticClass:"address_empty_right",on:{click:function(e){t.choosePayWay("online")}}},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#select"}})])])])]):t._e()])],1),t._v(" "),t.showLoading?s("loading"):t._e(),t._v(" "),t.showAlert?s("alert-tip",{attrs:{alertText:t.alertText},on:{closeTip:function(e){t.showAlert=!1}}}):t._e(),t._v(" "),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1)],1)},staticRenderFns:[]};var y=s("VU/8")(v,m,!1,function(t){s("4O6b")},"data-v-f6a23558",null);e.default=y.exports},TmV0:function(t,e,s){s("fZOM"),t.exports=s("FeBl").Object.values},fZOM:function(t,e,s){var a=s("kM2E"),r=s("mbce")(!1);a(a.S,"Object",{values:function(t){return r(t)}})},gRE1:function(t,e,s){t.exports={default:s("TmV0"),__esModule:!0}},mbce:function(t,e,s){var a=s("lktj"),r=s("TcQ7"),n=s("NpIQ").f;t.exports=function(t){return function(e){for(var s,i=r(e),o=a(i),c=o.length,u=0,l=[];c>u;)n.call(i,s=o[u++])&&l.push(t?[s,i[s]]:i[s]);return l}}}});
//# sourceMappingURL=2.11f06612bacf87c04735.js.map