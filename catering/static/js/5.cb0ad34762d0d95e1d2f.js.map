{"version":3,"sources":["webpack:///src/page/home/home.vue","webpack:///./src/page/home/home.vue?b255","webpack:///./src/page/home/home.vue"],"names":["home","data","storeId","deskId","deskName","perNum","deskList","showAlert","alertText","created","this","parseInt","$route","params","store_id","desk_id","personNum","getStoreInfo","getUserInfo","mounted","components","headTop","head","alertTip","computed","Object","vuex_esm","isLogin","state","userInfo","storeInfo","watch","handler","methods","extends_default","setStoreDesk","afterStoreInfo","desks","list","cur","name","document","title","store_name","autoLogin","ua","navigator","userAgent","toLowerCase","isWeiXin","test","window","location","href","env","$router","push","chooseDesk","typeName","j","length","doVerify","reload","closeTip","home_home","render","_vm","_h","$createElement","_c","_self","attrs","signin-up","head-title","staticClass","slot","on","click","src","store_log","_v","directives","rawName","value","expression","type","placeholder","maxlength","domProps","input","$event","target","composing","_s","_l","key","index","item","class","showHide","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.cb0ad34762d0d95e1d2f.js","sourcesContent":["<template>\n  <div>\n    <head-top signin-up='home' :head-title=\"storeInfo.store_name\">\n      <span slot='logo' class=\"head_logo\"  @click=\"reload\"><img :src=\"storeInfo.store_log\"/></span>\n    </head-top>\n    <section class=\"input_container person_num_container\">\n      <div class=\"person_tip\">\n        <span>就餐人数：</span><input type=\"text\" placeholder=\"请输入就餐人数\" maxlength=\"1\" v-model=\"perNum\">\n      </div>\n    </section>\n    <nav class=\"desk_nav\">\n      <div class=\"desk_tip\">\n        <span>当前餐台：{{deskName}}</span>\n        <span>未选择餐台时，请在餐台列表中选择</span>\n      </div>\n    </nav>\n    <section class=\"group_desk_container\">\n      <ul class=\"letter_classify\">\n        <li v-for=\"(value, key, index) in deskList\" :key=\"index\"  class=\"letter_classify_li\">\n          <h4 class=\"desk_title\">{{key}}\n          </h4>\n          <ul class=\"groupdesk_name_container desklistul clear\">\n            <li v-for=\"item in value\" :key=\"item.desk_id\" :class=\"item.cur\" @click=\"chooseDesk(item.desk_id,item.name)\">\n              {{item.name}}\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </section>\n    <div class=\"verify_container\" @click=\"doVerify\">确定</div>\n    <alert-tip v-if=\"showAlert\" :showHide=\"showAlert\" @closeTip=\"closeTip\" :alertText=\"alertText\"></alert-tip>\n  </div>\n</template>\n\n<script>\nimport headTop from '../../components/header/head'\nimport alertTip from '../../components/common/alertTip'\nimport { mapState, mapActions } from 'vuex'\nimport { wxOauth } from '../../config/env'\nexport default {\n  data () {\n    return {\n      storeId: null, // 门店ID\n      deskId: null, // 餐台ID\n      deskName: '', // 餐台名称\n      perNum: null, // 就餐人数\n      deskList: [],\n      showAlert: false, // 显示提示组件\n      alertText: null // 提示的内容\n    }\n  },\n  created () {\n    this.storeId = parseInt(this.$route.params.store_id)\n    this.deskId = this.$route.params.desk_id ? parseInt(this.$route.params.desk_id) : 0\n    this.perNum = this.perNum ? this.perNum : this.personNum\n    if (!parseInt(this.storeId)) {\n      this.showAlert = true\n      this.alertText = '二维码不正确哦！'\n      return false\n    }\n    this.getStoreInfo({store_id: this.storeId, desk_id: this.deskId})\n    this.getUserInfo()\n  },\n  mounted () {\n  },\n  components: {\n    headTop,\n    alertTip\n  },\n  computed: mapState({\n    isLogin: state => state.isLogin,\n    userInfo: state => state.userInfo,\n    storeInfo: state => state.storeInfo,\n    personNum: state => state.personNum\n  }),\n  watch: {\n    'isLogin': {\n      handler: 'autoLogin'\n    },\n    'storeInfo': {\n      handler: 'afterStoreInfo'\n    }\n  },\n  methods: {\n    ...mapActions({\n      setStoreDesk: 'setStoreDesk',\n      getUserInfo: 'getUserInfo',\n      getStoreInfo: 'getStoreInfo'\n    }),\n    afterStoreInfo () {\n      if (this.storeInfo) {\n        this.deskList = this.storeInfo.desks.list\n        this.deskName = this.storeInfo.desks.cur.name\n        document.title = this.storeInfo.store_name\n      }\n    },\n    autoLogin () {\n      let ua = navigator.userAgent.toLowerCase()\n      this.isWeiXin = !!(/micromessenger/.test(ua))\n      if (this.isWeiXin === false) {\n        this.showAlert = true\n        this.alertText = '请在微信中打开！'\n        return false\n      }\n      if (this.isLogin === false) {\n        window.location.href = wxOauth + '?store_id=' + this.storeId + '&desk_id=' + this.deskId\n        return false\n      }\n\n      if (this.deskId) {\n        this.$router.push('/shop')\n      }\n    },\n    chooseDesk (deskId, deskName) {\n      if (this.isLogin === false) {\n        this.showAlert = true\n        this.alertText = '请在微信中打开！'\n        return false\n      }\n      if (!this.perNum) {\n        this.showAlert = true\n        this.alertText = '请先输入就餐人数！'\n        return false\n      }\n      var typeName\n      for (typeName in this.deskList) {\n        for (var j = 0; j < this.deskList[typeName].length; j++) {\n          if (this.deskList[typeName][j].desk_id === deskId) {\n            this.deskList[typeName][j].cur = 'cur'\n          } else {\n            this.deskList[typeName][j].cur = 'normal'\n          }\n        }\n      }\n      this.deskId = deskId\n      this.deskName = deskName\n    },\n    doVerify () {\n      if (this.isLogin === false) {\n        this.showAlert = true\n        this.alertText = '请在微信中打开！'\n        return false\n      }\n      if (!this.perNum) {\n        this.showAlert = true\n        this.alertText = '请先输入就餐人数！'\n        return false\n      }\n      if (!this.deskId) {\n        this.showAlert = true\n        this.alertText = '请先选择餐台！'\n        return false\n      }\n      this.setStoreDesk({storeId: this.storeId, deskId: this.deskId, deskName: this.deskName, personNum: this.perNum})\n      this.$router.push('/shop')\n    },\n    // 点击图标刷新页面\n    reload () {\n      window.location.reload()\n    },\n    closeTip () {\n      this.showAlert = false\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '../../style/mixin';\n  .head_logo{\n    left: 0.4rem;\n    font-weight: 400;\n    @include sc(0.7rem, #fff);\n    @include wh(2.3rem, 0.7rem);\n    @include ct;\n    img{\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      margin-top: -0.4rem;\n    }\n  }\n  .input_container{\n    padding-top: 2.35rem;\n    border-top: 1px solid $bc;\n    background-color: #fff;\n    margin-bottom: 0.4rem;\n    .person_tip{\n      @include fj;\n      line-height: 1.45rem;\n      padding: 0 0.45rem;\n      span:nth-of-type(1){\n        @include sc(0.70rem, #666);\n      }\n      span:nth-of-type(2){\n        font-weight: 900;\n        @include sc(0.475rem, #9f9f9f);\n      }\n      input{\n        @include sc(0.70rem, #666);\n      }\n    }\n  }\n  .desk_nav{\n    border-top: 1px solid $bc;\n    background-color: #fff;\n    margin-bottom: 0.4rem;\n    .desk_tip{\n      @include fj;\n      line-height: 1.45rem;\n      padding: 0 0.45rem;\n      span:nth-of-type(1){\n        @include sc(0.70rem, #666);\n      }\n      span:nth-of-type(2){\n        font-weight: 900;\n        @include sc(0.475rem, #9f9f9f);\n      }\n\n    }\n  }\n  #hot_city_container{\n    background-color: #fff;\n    margin-bottom: 0.4rem;\n  }\n  .desklistul{\n    li{\n      float: left;\n      text-align: center;\n      color: $blue;\n      border-bottom: 0.025rem solid $bc;\n      border-right: 0.025rem solid $bc;\n      @include wh(25%, 1.75rem);\n      @include font(0.6rem, 1.75rem);\n    }\n    li:nth-of-type(4n){\n      border-right: none;\n    }\n    li.cur{\n      background-color: #f8cb86;\n    }\n  }\n  .desk_title{\n    color: #666;\n    font-weight: 400;\n    text-indent: 0.45rem;\n    border-top: 2px solid $bc;\n    border-bottom: 1px solid $bc;\n    @include font(0.55rem, 1.45rem, \"Helvetica Neue\");\n    span{\n      @include sc(0.475rem, #999);\n    }\n  }\n\n  .letter_classify_li{\n    margin-bottom: 0.4rem;\n    background-color: #fff;\n    border-bottom: 1px solid $bc;\n    .groupdesk_name_container{\n      li{\n        color: #666;\n      }\n    }\n  }\n\n  .verify_container{\n    margin: 1rem;\n    @include sc(.7rem, #fff);\n    background-color: #4cd964;\n    padding: .5rem 0;\n    border: 1px;\n    border-radius: 0.15rem;\n    text-align: center;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/home/home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('head-top',{attrs:{\"signin-up\":\"home\",\"head-title\":_vm.storeInfo.store_name}},[_c('span',{staticClass:\"head_logo\",attrs:{\"slot\":\"logo\"},on:{\"click\":_vm.reload},slot:\"logo\"},[_c('img',{attrs:{\"src\":_vm.storeInfo.store_log}})])]),_vm._v(\" \"),_c('section',{staticClass:\"input_container person_num_container\"},[_c('div',{staticClass:\"person_tip\"},[_c('span',[_vm._v(\"就餐人数：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.perNum),expression:\"perNum\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入就餐人数\",\"maxlength\":\"1\"},domProps:{\"value\":(_vm.perNum)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.perNum=$event.target.value}}})])]),_vm._v(\" \"),_c('nav',{staticClass:\"desk_nav\"},[_c('div',{staticClass:\"desk_tip\"},[_c('span',[_vm._v(\"当前餐台：\"+_vm._s(_vm.deskName))]),_vm._v(\" \"),_c('span',[_vm._v(\"未选择餐台时，请在餐台列表中选择\")])])]),_vm._v(\" \"),_c('section',{staticClass:\"group_desk_container\"},[_c('ul',{staticClass:\"letter_classify\"},_vm._l((_vm.deskList),function(value,key,index){return _c('li',{key:index,staticClass:\"letter_classify_li\"},[_c('h4',{staticClass:\"desk_title\"},[_vm._v(_vm._s(key)+\"\\n        \")]),_vm._v(\" \"),_c('ul',{staticClass:\"groupdesk_name_container desklistul clear\"},_vm._l((value),function(item){return _c('li',{key:item.desk_id,class:item.cur,on:{\"click\":function($event){_vm.chooseDesk(item.desk_id,item.name)}}},[_vm._v(\"\\n            \"+_vm._s(item.name)+\"\\n          \")])}))])}))]),_vm._v(\" \"),_c('div',{staticClass:\"verify_container\",on:{\"click\":_vm.doVerify}},[_vm._v(\"确定\")]),_vm._v(\" \"),(_vm.showAlert)?_c('alert-tip',{attrs:{\"showHide\":_vm.showAlert,\"alertText\":_vm.alertText},on:{\"closeTip\":_vm.closeTip}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e851eb8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/home/home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e851eb8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./home.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e851eb8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1e851eb8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/home/home.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}